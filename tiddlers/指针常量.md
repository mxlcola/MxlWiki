**知识卡片：指针常量**

- **定义**：指针常量是指指针本身是一个常量，意味着指针的值（即它所指向的地址）在初始化后不能更改。指针常量所指向的内存位置可以修改，但指针本身指向的地址不可变。

- **指针常量的声明**：指针常量的声明格式是：
  ```cpp
  类型* const 指针名;
  ```
  其中，`const` 关键字修饰指针，表示指针常量。

- **使用场景**：指针常量常用于在嵌入式系统编程中，确保指针的目标地址在程序的运行期间不会改变。通常用于指向固定硬件寄存器或内存区域，防止指针被误操作修改。

### **指针常量的例子**

#### **1. 声明和初始化指针常量**
```cpp
int a = 10;
int b = 20;
int* const ptr = &a;   // 声明一个指针常量，指针 ptr 初始指向变量 a
// ptr = &b;    // 错误：不能更改指针 ptr 的地址
*ptr = 30;    // 正确：可以修改 ptr 指向的内存内容
```

#### **2. 在嵌入式编程中的使用**
在嵌入式系统中，通常有一些固定的内存地址（例如硬件寄存器）需要通过指针访问。使用指针常量可以确保访问这些地址时，不会不小心改变指针所指向的硬件地址。

```cpp
#define GPIO_PORTA_BASE 0x40004000  // 定义GPIO端口A的基地址

// 定义一个指向GPIO端口A的指针常量
volatile uint32_t* const GPIO_PORTA = (uint32_t*) GPIO_PORTA_BASE;

void configure_gpio()
{
    *GPIO_PORTA = 0x01;  // 配置GPIO端口A的设置
    // GPIO_PORTA = (uint32_t*) 0x40005000;  // 错误：不能改变GPIO_PORTA的地址
}
```

#### **3. 访问寄存器地址**
在嵌入式编程中，通过指针常量访问硬件寄存器的值是非常常见的。通过 [[volatile关键字]]告诉编译器不要对该地址进行优化，因为寄存器的值可能随时改变。

```cpp
#define UART0_BASE 0x4000C000  // 定义UART0的基地址

// 定义指向UART0寄存器的指针常量
volatile uint32_t* const UART0 = (uint32_t*) UART0_BASE;

void uart_send(uint8_t data)
{
    *UART0 = data;  // 将数据发送到UART0
    // UART0 = (uint32_t*) 0x4000D000;  // 错误：不能改变UART0的地址
}
```

### **总结：**
- **指针常量**：指针本身是常量，指向的内存地址不可更改，但可以通过该指针修改所指向的内容。
- **嵌入式应用**：在嵌入式系统中，指针常量常用于访问固定地址的硬件寄存器或内存区域，以确保指针指向的地址不可改变。